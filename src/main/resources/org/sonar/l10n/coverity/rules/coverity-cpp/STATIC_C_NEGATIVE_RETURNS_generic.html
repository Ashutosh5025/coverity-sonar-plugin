Negative value returned from function is not being checked before being used improperly
